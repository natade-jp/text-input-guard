<!doctype html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<title>TextInputGuard</title>
		<link rel="stylesheet" href="./css/demo.css" />
	</head>
	<body>
		<label>
			<input id="price" type="text" inputmode="decimal" style="text-align: right" />
		</label>

		<div id="output" class="kv"></div>

		<script type="module">
			import { bindGuardDebug } from "./js/guard-debug.js";
			import { attach, rules } from "./lib/text-input-guard.min.js";

			const input = document.getElementById("price");
			const output = document.getElementById("output");

			const guard = attach(input, {
				rules: [
					rules.numeric({
						allowFullWidth: true,
						allowMinus: true,
						allowDecimal: true,
						allowEmpty: false
					}),
					rules.digits({
						int: 8,
						frac: 2,
						overflowInputInt: "block",
						overflowInputFrac: "block",
						fixFracOnBlur: "round",
						forceFracOnBlur: true
					}),
					rules.prefix({
						text: "Â¥",
						showWhenEmpty: true
					}),
					rules.suffix({
						text: " JPY"
					}),
					rules.comma()
				]
			});

			guard.setValue("12345.6");
			bindGuardDebug(guard, output);
		</script>
	</body>
</html>
